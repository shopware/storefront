"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["plugin_header_search-widget_plugin_js"],{2660:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var i=s(9568),r=s(4049),n=s(9610),o=s(3107),a=s(5965),l=s(5206),h=s(3266);let u="is-active";class c{resetIterator(){this._iterator=-1}_registerEvents(){this._element.addEventListener("keydown",this._onKeyDown.bind(this))}_onKeyDown(t){let e=r.Z.querySelector(document,this._parentSelector,!1);if(e&&(this._items=e.querySelectorAll(this._itemSelector),0!==this._items.length)){switch(t.key){case"Enter":this._onPressEnter(t);return;case"ArrowDown":t.preventDefault(),this._iterator++;break;case"ArrowUp":t.preventDefault(),this._iterator--;break;default:return}this._clampIterator(),h.Z.iterate(this._items,t=>t.classList.remove(u)),this._getCurrentSelection().classList.add(u)}}_onPressEnter(t){if(!(this._iterator<=-1))try{let e=r.Z.querySelector(this._getCurrentSelection(),"a");t.preventDefault(),e.click()}catch(t){}}_getCurrentSelection(){return this._items[this._iterator]}_clampIterator(){let t=this._getMaxItemCount();this._iterator<0&&(this._iterator=this._infinite?t:0),this._iterator>t&&(this._iterator=this._infinite?0:t)}_getMaxItemCount(){return this._items.length-1}constructor(t,e,s,i=!0){this._element=t,this._parentSelector=e,this._infinite=i,this._itemSelector=s,this.resetIterator(),this._registerEvents()}}class d extends i.Z{init(){try{this._inputField=r.Z.querySelector(this.el,this.options.searchWidgetInputFieldSelector),this._submitButton=r.Z.querySelector(this.el,this.options.searchWidgetButtonFieldSelector),this._url=r.Z.getAttribute(this.el,this.options.searchWidgetUrlDataAttribute)}catch(t){return}this._client=new o.Z,this._navigationHelper=new c(this._inputField,this.options.searchWidgetResultSelector,this.options.searchWidgetResultItemSelector,!0),this._registerEvents()}_registerEvents(){this._inputField.addEventListener("input",n.Z.debounce(this._handleInputEvent.bind(this),this.options.searchWidgetDelay),{capture:!0,passive:!0}),this.el.addEventListener("submit",this._handleSearchEvent.bind(this));let t=l.Z.isTouchDevice()?"touchstart":"click";document.body.addEventListener(t,this._onBodyClick.bind(this)),this._registerInputFocus()}_handleSearchEvent(t){this._inputField.value.trim().length<this.options.searchWidgetMinChars&&(t.preventDefault(),t.stopPropagation())}_handleInputEvent(){let t=this._inputField.value.trim();if(t.length<this.options.searchWidgetMinChars){this._clearSuggestResults();return}this._suggest(t),this.$emitter.publish("handleInputEvent",{value:t})}_suggest(t){let e=this._url+encodeURIComponent(t);this._client.abort();let s=new a.Z(this._submitButton);s.create(),this.$emitter.publish("beforeSearch"),this._client.get(e,t=>{this._clearSuggestResults(),s.remove(),this.el.insertAdjacentHTML("beforeend",t),this.$emitter.publish("afterSuggest")})}_clearSuggestResults(){this._navigationHelper.resetIterator();let t=document.querySelectorAll(this.options.searchWidgetResultSelector);h.Z.iterate(t,t=>t.remove()),this.$emitter.publish("clearSuggestResults")}_onBodyClick(t){t.target.closest(this.options.searchWidgetSelector)||t.target.closest(this.options.searchWidgetResultSelector)||(this._clearSuggestResults(),this.$emitter.publish("onBodyClick"))}_registerInputFocus(){if(this._toggleButton=r.Z.querySelector(document,this.options.searchWidgetCollapseButtonSelector,!1),!this._toggleButton){console.warn("Called selector '".concat(this.options.searchWidgetCollapseButtonSelector,"' for the search toggle button not found. Autofocus has been disabled on mobile."));return}let t=l.Z.isTouchDevice()?"touchstart":"click";this._toggleButton.addEventListener(t,()=>{setTimeout(()=>this._focusInput(),0)})}_focusInput(){this._toggleButton&&!this._toggleButton.classList.contains(this.options.searchWidgetCollapseClass)&&(this._toggleButton.blur(),this._inputField.setAttribute("tabindex","-1"),this._inputField.focus()),this.$emitter.publish("focusInput")}}d.options={searchWidgetSelector:".js-search-form",searchWidgetResultSelector:".js-search-result",searchWidgetResultItemSelector:".js-result",searchWidgetInputFieldSelector:"input[type=search]",searchWidgetButtonFieldSelector:"button[type=submit]",searchWidgetUrlDataAttribute:"data-url",searchWidgetCollapseButtonSelector:".js-search-toggle-btn",searchWidgetCollapseClass:"collapsed",searchWidgetDelay:250,searchWidgetMinChars:3}},3107:(t,e,s)=>{s.d(e,{Z:()=>i});class i{get(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",i=this._createPreparedRequest("GET",t,s);return this._sendRequest(i,null,e)}post(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";i=this._getContentType(e,i);let r=this._createPreparedRequest("POST",t,i);return this._sendRequest(r,e,s)}delete(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";i=this._getContentType(e,i);let r=this._createPreparedRequest("DELETE",t,i);return this._sendRequest(r,e,s)}patch(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";i=this._getContentType(e,i);let r=this._createPreparedRequest("PATCH",t,i);return this._sendRequest(r,e,s)}abort(){if(this._request)return this._request.abort()}_registerOnLoaded(t,e){e&&t.addEventListener("loadend",()=>{e(t.responseText,t)})}_sendRequest(t,e,s){return this._registerOnLoaded(t,s),t.send(e),t}_getContentType(t,e){return t instanceof FormData&&(e=!1),e}_createPreparedRequest(t,e,s){return this._request=new XMLHttpRequest,this._request.open(t,e),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),s&&this._request.setRequestHeader("Content-type",s),this._request}constructor(){this._request=null}}},5965:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(2363);class r extends i.Z{create(){super.create(),this.parent.disabled=!0}remove(){super.remove(),this.parent.disabled=!1}_isButtonElement(){return"button"===this.parent.tagName.toLowerCase()}constructor(t,e="before"){if(super(t,e),!1===this._isButtonElement())throw Error("Parent element is not of type <button>")}}},2363:(t,e,s)=>{s.d(e,{L:()=>n,Z:()=>o});var i=s(3266);let r="loader",n={BEFORE:"before",AFTER:"after",INNER:"inner"};class o{create(){if(!this.exists()){if(this.position===n.INNER){this.parent.innerHTML=o.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),o.getTemplate())}}remove(){let t=this.parent.querySelectorAll(".".concat(r));i.Z.iterate(t,t=>t.remove())}exists(){return this.parent.querySelectorAll(".".concat(r)).length>0}_getPosition(){return this.position===n.BEFORE?"afterbegin":"beforeend"}static getTemplate(){return'<div class="'.concat(r,'" role="status">\n                    <span class="').concat("visually-hidden",'">Loading...</span>\n                </div>')}static SELECTOR_CLASS(){return r}constructor(t,e=n.BEFORE){this.parent=t instanceof Element?t:document.body.querySelector(t),this.position=e}}}}]);