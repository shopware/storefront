"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["plugin_header_wishlist-widget_plugin_js"],{5560:(t,e,i)=>{i.r(e),i.d(e,{default:()=>r});var s=i(9568),n=i(4049);class r extends s.Z{init(){if(this._getWishlistStorage(),!this._wishlistStorage)throw Error("No wishlist storage found");this._renderCounter(),this._registerEvents(),this._wishlistStorage.load()}_getWishlistStorage(){this._wishlistStorage=window.PluginManager.getPluginInstanceFromElement(this.el,"WishlistStorage")}_renderCounter(){this.options.showCounter&&(this.el.innerHTML=this._wishlistStorage.getCurrentCounter()||"")}_registerEvents(){this.$emitter.subscribe("Wishlist/onProductsLoaded",()=>{this._renderCounter(),window.PluginManager.getPluginInstances("AddToWishlist").forEach(t=>{t.initStateClasses()})}),this.$emitter.subscribe("Wishlist/onProductRemoved",t=>{this._renderCounter(),this._reInitWishlistButton(t.detail.productId)}),this.$emitter.subscribe("Wishlist/onProductAdded",t=>{this._renderCounter(),this._reInitWishlistButton(t.detail.productId)});let t=n.Z.querySelector(document,".cms-element-product-listing-wrapper",!1);t&&window.PluginManager.getPluginInstanceFromElement(t,"Listing").$emitter.subscribe("Listing/afterRenderResponse",()=>{window.PluginManager.getPluginInstances("AddToWishlist").forEach(t=>{t.initStateClasses()})})}_reInitWishlistButton(t){let e=n.Z.querySelectorAll(document,".product-wishlist-"+t,!1);e&&e.forEach(t=>{window.PluginManager.getPluginInstanceFromElement(t,"AddToWishlist").initStateClasses()})}}r.options={showCounter:!0}}}]);