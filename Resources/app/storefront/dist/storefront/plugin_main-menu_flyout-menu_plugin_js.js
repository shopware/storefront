"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["plugin_main-menu_flyout-menu_plugin_js"],{753:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var i=s(9568),o=s(5206),l=s(4049),r=s(3266);class u extends i.Z{init(){this._debouncer=null,this._triggerEls=this.el.querySelectorAll("[".concat(this.options.triggerDataAttribute,"]")),this._closeEls=this.el.querySelectorAll(this.options.closeSelector),this._flyoutEls=this.el.querySelectorAll("[".concat(this.options.flyoutIdDataAttribute,"]")),this._registerEvents()}_registerEvents(){let t=o.Z.isTouchDevice()?"touchstart":"click",e=o.Z.isTouchDevice()?"touchstart":"mouseenter",s=o.Z.isTouchDevice()?"touchstart":"mouseleave";r.Z.iterate(this._triggerEls,t=>{let i=l.Z.getDataAttribute(t,this.options.triggerDataAttribute);t.addEventListener(e,this._openFlyoutById.bind(this,i,t)),t.addEventListener(s,()=>this._debounce(this._closeAllFlyouts))}),r.Z.iterate(this._closeEls,e=>{e.addEventListener(t,this._closeAllFlyouts.bind(this))}),o.Z.isTouchDevice()||r.Z.iterate(this._flyoutEls,t=>{t.addEventListener("mousemove",()=>this._clearDebounce()),t.addEventListener("mouseleave",()=>this._debounce(this._closeAllFlyouts))})}_openFlyout(t,e){this._isOpen(e)||(this._closeAllFlyouts(),t.classList.add(this.options.activeCls),e.classList.add(this.options.activeCls)),this.$emitter.publish("openFlyout")}_closeFlyout(t,e){this._isOpen(e)&&(t.classList.remove(this.options.activeCls),e.classList.remove(this.options.activeCls)),this.$emitter.publish("closeFlyout")}_openFlyoutById(t,e,s){let i=this.el.querySelector("[".concat(this.options.flyoutIdDataAttribute,"='").concat(t,"']"));i&&this._debounce(this._openFlyout,i,e),this._isOpen(e)||u._stopEvent(s),this.$emitter.publish("openFlyoutById")}_closeAllFlyouts(){let t=this.el.querySelectorAll("[".concat(this.options.flyoutIdDataAttribute,"]"));r.Z.iterate(t,t=>{let e=this._retrieveTriggerEl(t);this._closeFlyout(t,e)}),this.$emitter.publish("closeAllFlyouts")}_retrieveTriggerEl(t){let e=l.Z.getDataAttribute(t,this.options.flyoutIdDataAttribute,!1);return this.el.querySelector("[".concat(this.options.triggerDataAttribute,"='").concat(e,"']"))}_isOpen(t){return t.classList.contains(this.options.activeCls)}_debounce(t){for(var e=arguments.length,s=Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];this._clearDebounce(),this._debouncer=setTimeout(t.bind(this,...s),this.options.debounceTime)}_clearDebounce(){clearTimeout(this._debouncer)}static _stopEvent(t){t&&t.cancelable&&(t.preventDefault(),t.stopImmediatePropagation())}}u.options={debounceTime:125,activeCls:"is-open",closeSelector:".js-close-flyout-menu",flyoutIdDataAttribute:"data-flyout-menu-id",triggerDataAttribute:"data-flyout-menu-trigger"}}}]);